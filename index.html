<!DOCTYPE html>
<html dir="ltr" loc="pt-BR" lang="pt-BR" style="--vh: 7.2px;" data-color-mode="auto" data-light-theme="light" data-dark-theme="dark">

  <head>

    <base href="/capoeirando.website/">
    
    <title>Capoeirando</title>

    <meta charset="UTF-8">
    <meta content="IE=Edge" http-equiv="X-UA-Compatible"/>
    <meta name="description" content="Capoeirando Website"/>
    <meta name="author" content="Suebersson Montalvão"/>
    <!-- iOS meta tags & icons -->
    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>
    <meta name="apple-mobile-web-app-title" content="Capoeirando Website"/>

    <!-- Metas adicionadas -->
    <meta http-equiv="Permissions-Policy" content="interest-cohort=(), user-id=()"/>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, minimum-scale=1.0"/>
    <meta name="theme-color" content="#9E2A2B"/>
    <meta name="robots" content="max-image-preview:standard"/>
    <meta http-equiv="Content-Language" content="pt_BR"/>
    
    <link rel="apple-touch-icon" type="image/png" href="./icons/Icon-192.png"/>
    
    <link rel="icon" type="image/png" href="./favicon.png"/>

    <link rel="manifest" href="./manifest.json"/>

    <!-- Carregar os estilos do arquivo styles.css-->
    <link rel="stylesheet" type="text/css" href="./styles.css"/>

    <script type="text/javascript">
      // The value below is injected by flutter build, do not touch.
      var serviceWorkerVersion = "2120865795";
    </script>

    <!-- This script adds the flutter initialization JS code -->
    <script src="./flutter.js" defer></script>

    <!-- Tratamento caso a seja carregada uma url com duas barras no final da url-->
    <!-- Sem isso corre o risco a WebApp quebrar o carregamento do flutter -->
    <script type="text/javascript">

      // console.log(window.clientInformation.userAgentData.mobile);
      // console.log('Platform name: ' + window.clientInformation.userAgentData.platform);
      // console.log('System name: ' + window.clientInformation.platform);

      // let invalidURL = new RegExp('(http://|https://).*//');
      // if (invalidURL.test(window.location.href)) {
      //   window.location.href = window.location.origin + '/page_not_found';
      // }

      let url = window.location.href;

      let invalidURL = document.querySelector("base").href + '/';

      if(url === invalidURL || url.includes(invalidURL)){
        // window.location.href = document.querySelector("base").href + 'page_not_found';
        window.location.replace(document.querySelector("base").href + 'page_not_found');
      }

      // https://developer.mozilla.org/en-US/docs/Web/API/DOMException
      // DOMException.SECURITY_ERR
      // DOMException.INVALID_ACCESS_ERR
      // DOMException.NOT_FOUND_ERR

      // window.addEventListener("DOMContentLoaded", function(e) {
      //   console.log(e.);
      // });

    </script>

  </head>

  <body>

    <!-- Carregar splashScreen nativa -->
    <img class="splashScreenLogo" src="./img/logo_144x144.png" height="100" width="100" style="visibility:visible" alt="Logo de splashScreen para Capoeirando Website"/>

    <script type="text/javascript">
      window.addEventListener('load', function(ev) {
        // Download main.dart.js
        _flutter.loader.loadEntrypoint({
          serviceWorker: {
            serviceWorkerVersion: serviceWorkerVersion,
          },
          onEntrypointLoaded: function(engineInitializer) {
            try {
              //https://docs.flutter.dev/platform-integration/web/renderers
              // se o navegador for mobile, renderizar a Website usando html para carregar a página 
              // mais rápido
              engineInitializer.initializeEngine({
                renderer: window.navigator.userAgentData.mobile
                  ? "html"
                  : "canvaskit"
              }).then(function(appRunner) {
                appRunner.runApp();
                document.querySelector("img[class='splashScreenLogo']").hidden = true;
              });
            } catch (error) {
              engineInitializer.initializeEngine().then(function(appRunner) {
                appRunner.runApp();
                document.querySelector("img[class='splashScreenLogo']").hidden = true;
              });
            }
          }
        });
      });
    </script>
  
  </body>
  
</html>
